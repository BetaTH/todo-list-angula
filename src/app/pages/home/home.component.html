<main class="h-screen flex">
  <section class="w-full px-5 sm:px-20 flex items-center flex-col gap-10 mt-20">
    <h1 class="text-4xl font-semibold">LISTA DE TAREFAS</h1>
    <div class="w-full sm:w-[40rem] max-w-full flex gap-5">
      <input
        class="input input-bordered input-primary w-full text-lg"
        type="text"
        [(ngModel)]="newTask"
      />
      <button
        title="Adicionar"
        (click)="addTask()"
        class="btn btn-primary text-lg"
      >
        <lucide-angular name="plus" class=""></lucide-angular>
      </button>
    </div>
    <div class="w-full flex flex-col sm:w-[40rem] max-w-full items-start gap-5">
      <p class="text-xl font-medium">
        Tarefas a fazer: {{ getTasksCount() - getTasksDoneCount() }} de
        {{ getTasksCount() }}
      </p>
      <div class="w-full flex flex-col">
        @for (task of tasks; track task.id; let idx = $index, length = $count) {
        <div
          class="flex w-full justify-between pb-2 pt-4 border-primary gap-4"
          [ngClass]="{ 'border-b': idx !== length - 1, 'pt-0': idx === 0 }"
        >
          <span class="text-lg" [ngClass]="{ 'line-through': task.isDone }"
            >{{ task.title }}
          </span>
          <div class="flex gap-2 items-start">
            <button
              [title]="task.isDone ? 'Desfazer' : 'Concluir'"
              (click)="toggleIsDone(task)"
              class="btn btn-primary size-10 p-0 min-h-10"
              [ngClass]="{ 'btn-ghost': task.isDone }"
            >
              <lucide-angular
                [name]="task.isDone ? 'undo' : 'check'"
                class="size-5"
              ></lucide-angular>
            </button>
            <button
              title="Deletar"
              (click)="removeTask(task)"
              class="btn btn-error size-10 p-0 min-h-10"
            >
              <lucide-angular name="trash" class="size-5"></lucide-angular>
            </button>
          </div>
        </div>
        } @empty {
        <div class="w-full h-40 flex items-center justify-center flex-col">
          <lucide-angular name="list-todo" class="size-16"></lucide-angular>
          <span class="text-xl mt-5">Você não possui tarefas cadastradas</span>
        </div>
        } @if (tasks.length > 0) {
        <div class="w-full flex mt-10">
          <button (click)="clearTasks()" class="ml-auto text-base btn btn-sm">
            Limpar Tudo
            <lucide-angular name="x" class="size-5"></lucide-angular>
          </button>
        </div>
        }
      </div>
    </div>
  </section>
</main>
